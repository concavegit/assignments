
%% Don't change any of these definitions.
\usepackage{graphicx}
\usepackage{listings}
\usepackage{xstring}
\usepackage{subfiles}

\usepackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,
    urlcolor=cyan,
}
\usepackage{fontawesome}
\usepackage{enumerate}
\usepackage{amsmath,amssymb,amsthm}
\usepackage{enumitem}
\usepackage[iso,american]{isodate}
\usepackage{fancyhdr}
\usepackage{todonotes}
\usepackage{xcolor}
\usepackage[tikz]{bclogo}
\usepackage[framemethod=tikz]{mdframed}
\usepackage{lipsum}
\usepackage{bm}
\usepackage[many]{tcolorbox}

\setcounter{secnumdepth}{2}

%%
%% These definitions are meant to make your life easier. They provide shortcut commands for lots of common latex commands

\newcommand{\bi}{\begin{itemize}}
\newcommand{\ei}{\end{itemize}}
\newcommand{\be}{\begin{enumerate}}
\newcommand{\ee}{\end{enumerate}}
\newcommand{\beq}{\begin{equation}}
\newcommand{\eeq}{\end{equation}}

% I am prepending ml to some of these commands to avoid namespace conflicts
\newcommand{\mlvec}[1]{\mathbf{#1}}
\newcommand{\mlmat}[1]{\mathbf{#1}}

\newcommand{\twobytwo}[4]{\ensuremath{\begin{bmatrix} #1 & #2 \\ #3 & #4\end{bmatrix}}}
\newcommand{\threebythree}[9]{\ensuremath{\begin{bmatrix} #1 & #2 & #3 \\ #4 & #5 & #6 \\ #7 & #8 & #9 \end{bmatrix}}}
\newcommand{\threebytwo}[6]{\ensuremath{\begin{bmatrix} #1 & #2  \\ #3 & #4  \\ #5 & #6  \end{bmatrix}}}

\newcommand{\onebytwo}[2]{\ensuremath{\begin{bmatrix} #1 & #2 \end{bmatrix}}}
\newcommand{\onebythree}[3]{\ensuremath{\begin{bmatrix} #1 & #2 & #3 \end{bmatrix}}}

\newcommand{\twobyone}[2]{\ensuremath{\begin{bmatrix} #1 \\ #2 \end{bmatrix}}}
\newcommand{\threebyone}[3]{\ensuremath{\begin{bmatrix} #1 \\ #2 \\ #3 \end{bmatrix}}}

\newcommand{\fourbyone}[4]{\ensuremath{\begin{bmatrix} #1 \\ #2 \\ #3 \\ #4 \end{bmatrix}}}

\newcommand{\That}{\hat{\mathbf{T}}}
\newcommand{\T}{\mathbf{T}}
\newcommand{\Nhat}{\hat{\mathbf{N}}}
\newcommand{\R}{\mathbf{R}}
\newcommand{\A}{\mathbf{A}}
\renewcommand{\L}{\mathbf{L}}
\newcommand{\M}{\mathbf{M}}
\newcommand{\Bhat}{\hat{\mathbf{B}}}
\renewcommand{\C}{\mathbf{C}}
\renewcommand{\S}{\mathbf{S}}
\renewcommand{\v}{\mathbf{v}}
\renewcommand{\t}{\mathbf{t}}
\renewcommand{\u}{\mathbf{u}}
\renewcommand{\r}{\mathbf{r}}
\renewcommand{\a}{\mathbf{a}}
\newcommand{\e}{\mathbf{e}}
\newcommand{\x}{\mathbf{x}}
\newcommand{\y}{\mathbf{y}}
\newcommand{\ihat}{\hat{\textbf{\i}}}
\newcommand{\jhat}{\hat{\textbf{\j}}}
\newcommand{\khat}{\hat{\mathbf{k}}}

\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}


%% these lines allow you to include / remove various parts of the TeX document
\newtoggle{solutions}


\newcommand{\iftoggleverb}[1]{%
  \ifcsdef{etb@tgl@#1}
    {\csname etb@tgl@#1\endcsname\iftrue\iffalse}
    {\etb@noglobal\etb@err@notoggle{#1}\iffalse}%
}


\newcommand{\solution}[1] {
\iftoggle{solutions}{

\textbf{Solution:}

#1
}

}


\lstset{basicstyle = \ttfamily,columns=fullflexible,upquote=true}

\newcommand{\bes}{\begin{enumerate}[label=(\alph*)]}
\newcommand{\ees}{\end{enumerate}}

\geometry{left=1in,top=1in,headsep=2\baselineskip,textwidth=30pc,marginparsep=2pc,marginparwidth=10pc,textheight=44\baselineskip,headheight=\baselineskip}

\sloppy

\mdfsetup{skipabove=\topskip,skipbelow=\topskip}

\newenvironment{learningobjectives}{%
\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt]
\node[anchor=east,rectangle,fill=magenta!20]
{\strut \Large{\faLightbulbO~Learning Objectives}};}}
\mdfsetup{innertopmargin=10pt,linecolor=magenta!20,%
linewidth=2pt,topline=true,
frametitleaboveskip=\dimexpr-\ht\strutbox\relax,}
\begin{mdframed}[]\relax%
}{\end{mdframed}}



\newenvironment{boxedsolution}{%
\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt]
\node[anchor=east,rectangle,fill=green!30]
{\strut \faStarO~Solution};}}%
\mdfsetup{innertopmargin=10pt,linecolor=green!30,%
linewidth=2pt,topline=true,
frametitleaboveskip=\dimexpr-\ht\strutbox\relax,}
\begin{mdframed}[]\relax%
}{\end{mdframed}}


\newenvironment{priorknowledge}{%
\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt]
\node[anchor=east,rectangle,fill=orange!50]
{\strut \Large{\faRetweet~Prior Knowledge Utilized}};}}%
%
\mdfsetup{innertopmargin=10pt,linecolor=orange!50,%
linewidth=2pt,topline=true,
frametitleaboveskip=\dimexpr-\ht\strutbox\relax,}
\begin{mdframed}[]\relax%
}{\end{mdframed}}



\newcounter{externalresources}
\newenvironment{externalresources}[1][]{%
\ifstrempty{#1}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt]
\node[anchor=east,rectangle,fill=pink!50]
{\strut External Resource(s)};}}
}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt]
\node[anchor=east,rectangle,fill=pink!50]
{\strut External Resource(s)~#1};}}%
}%
\mdfsetup{innertopmargin=10pt,linecolor=pink!50,%
linewidth=2pt,topline=true,
frametitleaboveskip=\dimexpr-\ht\strutbox\relax,}
\begin{mdframed}[]\relax%
}{\end{mdframed}}



\newenvironment{recall}[1][]{%
\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt]
\node[anchor=east,rectangle,fill=brown!50]
{\strut \Large{\faRetweet~Recall:~#1}};}}%
%
\mdfsetup{innertopmargin=10pt,linecolor=brown!50,%
linewidth=2pt,topline=true,
frametitleaboveskip=\dimexpr-\ht\strutbox\relax,}
\begin{mdframed}[]\relax%
}{\end{mdframed}}


\newenvironment{correction}{%
\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt]
\node[anchor=east,rectangle,fill=red!100]
{\strut \faClose~Correction};}}%
%
\mdfsetup{innertopmargin=10pt,linecolor=red!100,%
linewidth=2pt,topline=true,
frametitleaboveskip=\dimexpr-\ht\strutbox\relax,}
\begin{mdframed}[]\relax%
}{\end{mdframed}}



\newenvironment{notice}{%
\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt]
\node[anchor=east,rectangle,fill=yellow!100]
{\strut \faWarning~Notice};}}%
%
\mdfsetup{innertopmargin=10pt,linecolor=yellow!100,%
linewidth=2pt,topline=true,
frametitleaboveskip=\dimexpr-\ht\strutbox\relax,}
\begin{mdframed}[]\relax%
}{\end{mdframed}}


\newcounter{exercise}
\newenvironment{exercise}[1][]{%
\stepcounter{exercise}%
\ifstrempty{#1}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt]
\node[anchor=east,rectangle,fill=blue!20]
{\strut Exercise~\theexercise};}}
}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt]
\node[anchor=east,rectangle,fill=blue!20]
{\strut Exercise~\theexercise~#1};}}%
}%
\mdfsetup{innertopmargin=10pt,linecolor=blue!20,%
linewidth=2pt,topline=true,
frametitleaboveskip=\dimexpr-\ht\strutbox\relax,}
\begin{mdframed}[]\relax%
}{\end{mdframed}}



% use package marginnote, which overrides the Tufte marginnote package.  This will allow us to use marginnotes within boxes.  It apparently will not carry over some of the Tufte settings though (https://tex.stackexchange.com/questions/412127/how-to-use-marginnote-in-mdframed-environment-follow-up)
%\let\marginnote\someundefinedcommand
%\usepackage{marginnote}

